## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/test/README.md

**Start chunk id:** 0995e3f3eddf60bfec18ac391f59e268164bb49e69ecf1e46419bf5317e3361d

## Content

**Question:** What is the return value expected for a successful test in the macro, and what happens if the test fails?

**Answer:** For a successful test in the macro, the return value must be `0`. If the test fails, the return value should be a non-zero integer.

---

**Question:** What command should you use if you want to keep all test artifacts after running the tests?

**Answer:** The command you should use to keep all test artifacts after running the tests is:
```bash
${O2DPG_ROOT}/test/run_tests.sh --keep-artifacts
```

---

**Question:** How are the tests for generator macros structured and which types of macros are tested?

**Answer:** Tests for generator macros are structured based on several criteria. Macros are tested if they are associated with:

1. Changed generator `.ini` files,
2. Test macros specific to a generator `.ini` file,
3. Macros utilized within generator `.ini` files,
4. Included macros that are referenced by macros used in generator `.ini` files.

These tests are executed by running:
```bash
${O2DPG_ROOT}/test/run_tests.sh [--fail-immediately]
```

The `--fail-immediately` flag, when used, causes the test suite to stop upon encountering a failing test. Otherwise, all tests are attempted.

---

**Question:** What happens to O2DPG_TEST_HASH_BASE if both O2DPG_TEST_HASH_BASE and ALIBUILD_BASE_HASH are not set, and there are unstaged changes in the repository?

**Answer:** If both O2DPG_TEST_HASH_BASE and ALIBUILD_BASE_HASH are not set, and there are unstaged changes in the repository, O2DPG_TEST_HASH_BASE will be set to HEAD.