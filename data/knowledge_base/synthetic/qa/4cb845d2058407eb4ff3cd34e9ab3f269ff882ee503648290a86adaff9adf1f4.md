## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/MC/README.md

**Start chunk id:** 4cb845d2058407eb4ff3cd34e9ab3f269ff882ee503648290a86adaff9adf1f4

## Content

**Question:** What specific configuration file should be used for the `vertexQC` task in the `include_all_QC_finalization` function, and where is it located relative to the `o2dpg` root directory?

**Answer:** The specific configuration file for the `vertexQC` task in the `include_all_QC_finalization` function should be 'vertexing-qc-direct-mc.json'. This file is located at 'json://${O2DPG_ROOT}/MC/config/QC/json/vertexing-qc-direct-mc.json', relative to the `o2dpg` root directory.

---

**Question:** What are the steps required to integrate a new Quality Control (QC) Task into the main simulation, reconstruction, and QC workflow within the O2DPG framework, and how would you build the necessary components?

**Answer:** To integrate a new Quality Control (QC) Task into the main simulation, reconstruction, and QC workflow within the O2DPG framework, follow these steps:

1. Ensure that you have built the O2, QualityControl, O2Physics, and O2DPG components using the `o2` default settings with the following command:
```
aliBuild build O2 QualityControl O2Physics O2DPG --defaults o2 -j <jobs>
```
Replace `<jobs>` with the number of jobs you want to use for building, for example, `4` for four parallel jobs.

After setting up the necessary components, you can proceed to add your new QC Task to the simulation script by following the specific integration procedures outlined in the documentation for O2DPG.

---

**Question:** What is the purpose of the `needs` parameter in the `addQCPerTF` function, and how does it affect the execution of the QC task?

**Answer:** The `needs` parameter in the `addQCPerTF` function specifies which tasks should run before the primary vertex QC task. This ensures that the relevant results from these preceding tasks are available when the QC task executes. By defining the tasks that need to complete first, it guarantees that the data required for the primary vertex QC is ready and can be utilized effectively. This parameter affects the execution of the QC task by making it dependent on the successful completion of the specified tasks, thus ensuring that all necessary data and intermediate results are in place before the QC process begins.

---

**Question:** What steps should be taken if the initial script execution fails, and how does the script handle such failures?

**Answer:** If the initial script execution fails, it is recommended to contact the repository maintainers. The script is designed to handle some intermittent issues by resuming from the latest failed task if the script is executed again.

---

**Question:** What changes should be expected in the default parameters when the configuration is moved from a test environment to a production environment, and why might these changes be necessary?

**Answer:** When the configuration moves from a test environment to a production environment, the default parameters in the "Activity" section, such as "provenance", "passName", and "periodName", are expected to be overwritten with production-specific values. This is necessary to ensure that the configuration aligns with the actual production setup, which may have different requirements and standards compared to the test environment. The changes help in maintaining consistency and accuracy in the production process, as the specific values for "provenance", "passName", and "periodName" are tailored to the production context.

---

**Question:** What triggers should be used in the post-processing task configuration, and where can you find examples of their usage?

**Answer:** Triggers like `ForEachObject` or `ForEachLatest` should be used in the post-processing task configuration. You can find examples of their usage in the QC doc available at [QC doc](https://github.com/AliceO2Group/QualityControl/blob/master/doc/PostProcessing.md#more-examples).

---

**Question:** What steps should be followed to ensure that the QC post-processing workflow is executed only when the required QC objects are already in the QCDB?

**Answer:** To ensure that the QC post-processing workflow is executed only when the required QC objects are already in the QCDB, you need to set the correct `needs` parameter when using the `add_QC_postprocessing` function in the `include_all_QC_finalization` function of `o2dpg_qc_finalization_workflow.py`. This parameter should be set to the names of the QC objects that are prerequisites for the post-processing workflow.