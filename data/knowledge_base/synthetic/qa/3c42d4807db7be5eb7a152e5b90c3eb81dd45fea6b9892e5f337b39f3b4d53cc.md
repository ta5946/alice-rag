## Metadata

**Document link:** https://github.com/AliceO2Group/simulation/blob/main/docs/transport/geometry.md

**Start chunk id:** 3c42d4807db7be5eb7a152e5b90c3eb81dd45fea6b9892e5f337b39f3b4d53cc

## Content

**Question:** What are the current limitations when making local changes to medium-specific controls using Geant4 in the simulation?

**Answer:** At the moment, local changes to medium-specific controls do not take effect when using Geant4. Only global settings impact the transport code's behavior.

---

**Question:** How does the configuration syntax for scaling the density of different modules in the simulation differ from scaling the overall density?

**Answer:** The configuration syntax for scaling the density of different modules is more specific than scaling the overall density. For scaling the overall density, one uses a single value for the global density factor, like this:

```bash
o2-sim <args> --configKeyValues "SimMaterialParams.globalDensityFactor=2"
```

In contrast, for scaling densities per module, a colon-separated list is used to specify the factor for each module, such as:

```bash
o2-sim <args> --configKeyValues "SimMaterialParams.localDensityFactor=ITS:1.5,TPC:1.2"
```

This syntax allows individual control over the density of specific modules, while the overall density is adjusted uniformly with a single value.

---

**Question:** What are the specific secondary particle types that can be suppressed below a certain energy threshold in the simulation, and which cut parameters are used for each type?

**Answer:** In the simulation, the production of various secondary particle types can be suppressed below a certain energy threshold. The specific cut parameters used for each type are as follows:

- Gammas: `CUTGAM`
- Electrons: `CUTELE`
- Neutral hadrons: `CUTNEU`
- Charged hadrons: `CUTHAD`
- Muons: `CUTMUO`
- Electron bremsstrahlung: `BCUTE`
- Muon and hadron bremsstrahlung: `BCUTM`
- Delta-rays by electrons: `DCUTE`
- Delta-rays by muons: `DCUTM`
- Direct pair production by muons: `PPCUTM`

---

**Question:** How does the local material density setting affect the global material density setting in the simulation?

**Answer:** The local material density setting for a module takes precedence over the global setting in the simulation.

---

**Question:** How can you modify the material parameters for a specific module during a simulation run, and what are the steps involved in changing these parameters on the fly?

**Answer:** To modify the material parameters for a specific module during a simulation run, you can change these parameters on the fly. The steps involved are as follows:

1. Extract the current parameter configuration by running:
   ```bash
   o2-sim-serial -n0 --configKeyValues "MaterialManagerParam.outputFile=o2_medium_params.json"
   ```
   This command will generate the `o2_medium_params.json` file, which contains all the media parameters per module.

2. Modify the parameters in the `o2_medium_params.json` file according to your needs.

3. Use the modified configuration file to run the simulation by injecting the new parameter configuration:
   ```bash
   o2-sim --configKeyValues "MaterialManagerParam.inputFile=o2_medium_params_modified.json" [<further_arguments>]
   ```
   Replace `o2_medium_params_modified.json` with the path to your modified JSON file.

This method allows for dynamic adjustments to the material parameters without needing to change the source code or restart the simulation process.