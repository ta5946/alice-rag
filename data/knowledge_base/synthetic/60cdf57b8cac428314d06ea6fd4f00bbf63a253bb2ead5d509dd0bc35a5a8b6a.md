## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/UTILS/get_cherrypick_commit_list.sh

**Start chunk id:** 60cdf57b8cac428314d06ea6fd4f00bbf63a253bb2ead5d509dd0bc35a5a8b6a

## Content

**Question:** What is the purpose of the `can_swap_commits` function call in the script, and how does it affect the `CP_COMMIT_LIST` array?

**Answer:** The `can_swap_commits` function call checks whether a commit can be safely swapped or cherry-picked. If the function returns true (exit status 0), the commit is deemed compatible and added to the `CP_COMMIT_LIST` array. This ensures that only compatible commits are included in the final list of commits needed for the cherry-pick operation.

---

**Question:** What is the purpose of the `modifies_common_files` function in the script?

**Answer:** The `modifies_common_files` function checks if two specified git commits modify at least one common file. This functionality is intended to determine whether there is a conflict when attempting to cherry-pick a commit, as cherry-picking a commit that modifies files also changed in another commit can lead to conflicts.

---

**Question:** What will be the output of the `can_swap_commits` function if `commitA` is "v1.2" and `commitB` is a list containing "v1.1", "v1.3", and "v1.4", assuming that "v1.1" and "v1.3" share common modified files, but "v1.2" and "v1.4" do not share common modified files with any commit in the list?

**Answer:** The `can_swap_commits` function will return 0. This is because the function will reverse the order of commits in the `commitB` list. In this case, the reversed list will be "v1.4", "v1.3", "v1.1". Then, it checks if `commitA` ("v1.2") can be swapped with any commit in the reversed list. Since "v1.3" and "v1.1" share common modified files, the function will find a match and return 0, indicating that a swap is possible.

---

**Question:** What does the script do if a cherry-picked commit results in a conflict during the process of swapping commits between two branches?

**Answer:** If a cherry-picked commit results in a conflict during the process of swapping commits between two branches, the script sets `RC` to 0, indicating that the commit swap cannot be completed due to conflicts. It then aborts the cherry-pick process using `git cherry-pick --abort`.

---

**Question:** What is the purpose of the `FILTERED_COMMITS1` array in the script?

**Answer:** The purpose of the `FILTERED_COMMITS1` array is to store the commit hashes from `COMMITLIST` that modify the same set of files as specified by the ${cp_commit} commit. The script iterates over each commit in `COMMITLIST`, calls the `modifies_common_files` function to check if the commit modifies the same files as ${cp_commit}, and if so, adds the commit hash to `FILTERED_COMMITS1`.