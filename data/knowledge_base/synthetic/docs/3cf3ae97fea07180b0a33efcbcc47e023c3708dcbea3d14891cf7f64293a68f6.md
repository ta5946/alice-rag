## Metadata

**Document link:** https://github.com/AliceO2Group/simulation/blob/main/docs/transport/engines.md

**Start chunk id:** 3cf3ae97fea07180b0a33efcbcc47e023c3708dcbea3d14891cf7f64293a68f6

## Content

To execute this, start by following the instructions in [MCStepLogger](../mcsteplogger/) to generate a file with logged steps. For replaying these steps, use the command:
```bash
o2-sim-serial -n <ref_nevents> -e MCReplay -g extkinO2 --extKinFile o2sim_Kine.root -o replay
```
Be aware that the script will search for the recorded steps in the current directory, looking for a file named `MCStepLoggerOutput.root`. If the file name or path differs, you can specify it using `--configKeyValues="MCReplayParam.stepFilename=<path/step/file/name>"`.

It is recommended to use a different output prefix, such as `-o replay`, to avoid overwriting previous output files. Alternatively, run the simulation in a different directory.

Additionally, you can set a minimum energy cut (in GeV) for particles that are produced. For instance, to discard particles produced with energy below `0.1 GeV`, use `--configKeyValues="MCReplayParam.energyCut=0.1"`.

---

Energy cuts can also be configured for each simulation medium and type. **Further details on this will be provided soon.**

### Key Points

Ensure that the same modules are used or excluded as in the reference run (`-m` and `--skipModules` flags, see [here](README.md/#simulation-geometry-modules-and-detectors)).

It is important to note that the number of events that can be simulated cannot exceed the number simulated during the step logging.

### Use Cases

By comparing the generated hits with those from the reference run, you can omit steps or particle production that have a minimal effect on the hits and, consequently, on the digits. This allows the detector simulation to be optimized for speed and efficiency.

---

## O2TrivialMCEngine

This entity acts as a placeholder rather than an actual engine, used primarily in scenarios where a real engine is unnecessary. At present, its main application is when only the [kinematics](mckine.md) of the primaries are required. Such runs can be started with
```bash
o2-sim --noGeant
```
The engine is automatically configured and does not need to be specified explicitly.

**...under construction...**

---

---
sort: 1
title: Transport engines
---

# Transport engines

## GEANT4

### Adjusting hadronic cross sections

Hadronic cross sections can be adjusted by specifying a particular Geant4 configuration during the transport simulation. [Here is an example](https://github.com/AliceO2Group/O2DPG/blob/eb3591632fe75ba65ff68353984839c22826a89c/MC/config/PWGLF/xsection/g4config_had_x2.in#L66-L72) illustrating the scaling of various hadronic cross sections.

## FLUKA

Details regarding FLUKA.

## GEANT3

Information concerning GEANT3.

## MCReplay engine

The MCReplay engine is employed to replay a simulation using steps recorded by the [MCStepLogger](../mcsteplogger/). While it simulates the injection of each step sequentially, it is not a true simulation engine but rather a tool that mimics one.