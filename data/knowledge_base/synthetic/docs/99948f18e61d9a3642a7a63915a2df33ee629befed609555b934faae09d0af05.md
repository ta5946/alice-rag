## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/UTILS/UpdateHepMCEventSkip.sh

**Start chunk id:** 99948f18e61d9a3642a7a63915a2df33ee629befed609555b934faae09d0af05

## Content

#!/bin/bash

# Path to the JSON file
JSON_FILE=${1:-HepMC_EventSkip_ALT.json}
tf=$2

# Value to set or add
EVENTS=$(grep "DISTRIBUTING" ../tf${tf}/sgngen_*.log | tail -n 1 | awk '//{print $5}')

if [ ! -f $JSON_FILE ]; then
  echo "[]" > ${JSON_FILE} # initialize json file if it doesn't exist
fi
# insert event count ... if a count for this tf does not already exist
JQ_COMMAND="jq 'if any(.[]; .tf == ${tf}) then . else . + [{\"tf\": ${tf}, "HepMCEventCount": ${EVENTS}}] end' ${JSON_FILE} > tmp_123.json; mv tmp_123.json ${JSON_FILE}"
eval ${JQ_COMMAND}