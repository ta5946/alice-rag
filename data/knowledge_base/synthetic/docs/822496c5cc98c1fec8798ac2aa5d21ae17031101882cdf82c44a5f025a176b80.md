## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/DATA/testing/detectors/TOF/tof-epn-cosmics-dig.sh

**Start chunk id:** 822496c5cc98c1fec8798ac2aa5d21ae17031101882cdf82c44a5f025a176b80

## Content

#!/usr/bin/env bash

source common/setenv.sh

calibration_node="epn007-ib:30453"

SEVERITY=warning
source common/getCommonArgs.sh
CTF_DICT="--ctf-dict $FILEWORKDIR/ctf_dictionary.root"
PROXY_INSPEC="x:TOF/CRAWDATA;dd:FLP/DISTSUBTIMEFRAME/0"
NTHREADS=2
# Set the output directory for the CTF to the current directory if not specified or set it to an empty string `CTFOUT=\"""\"`. The directory must already exist.
CTFOUT="/home/fnoferin/public/out/"
MYDIR="$(dirname $(readlink -f $0))"
OUT_CHANNEL="name=downstream,method=connect,address=tcp://${calibration_node},type=push,transport=zeromq"
PROXY_OUTSPEC="dd:FLP/DISTSUBTIMEFRAME/0;dig:TOF/DIGITS;head:TOF/DIGITHEADER;row:TOF/READOUTWINDOW;patt:TOF/PATTERNS;diafreq:TOF/DIAFREQ"

---

o2-dpl-raw-proxy ${ARGS_ALL} --dataspec "${PROXY_INSPEC}" --inject-missing-data \
--readout-proxy "--channel-config 'name=readout-proxy,type=pull,method=connect,address=ipc://@$INRAWCHANNAME,transport=shmem,rateLogging=1'" \
| o2-tof-reco-workflow --input-type raw --output-type digits --disable-root-output \
${ARGS_ALL} --configKeyValues "$ARGS_ALL_CONFIG;" \
--pipeline "tof-compressed-decoder:${NTHREADS}" \
| o2-qc ${ARGS_ALL} --config json://${MYDIR}/qc-full.json --local --host epn \
| o2-dpl-output-proxy ${ARGS_ALL} --channel-config ${OUT_CHANNEL} --dataspec ${PROXY_OUTSPEC} \
| o2-dpl-run $ARGS_ALL $GLOBALDPLOPT --dds ${WORKFLOWMODE_FILE} # option to export the DDS xml file instead of running