## Metadata

**Document link:** https://github.com/AliceO2Group/AliceO2/blob/dev/doc/CodeOrganization.md

**Start chunk id:** 08abf71d046589d62bb8cd2565098c07afb1f95b6b97ab0c13ac96bcba21047a

## Content

<!-- doxy
\page refdocCodeOrganization Code Structure
/doxy -->

# Code Structure

## Overview

The AliceO2 project is organized into various sub-modules. The detector-specific sub-modules are located within the Detectors directory, while those related to specific functions are situated in the main directory or grouped, such as Utilities.

A typical submodule is structured as follows:

```
.
|-- Common
|   |-- CMakeLists.txt
|   |-- doc
|   |   `-- All documentation files
|   |-- include
|   |   `-- Common
|   |       `-- Factory.h
|   |-- src
|   |   |-- Internal.h
|   |   `-- Factory.cxx
|   `-- test
|       `-- TestFactory.cxx

```

Depending on the specific case, some subdirectories can be optional or added. Headers are placed in the include directory if they are part of the public interface; otherwise, they go into the src directory.

### Other Repositories in AliceO2Group

Repositories within the AliceO2Group adhere to the same structure.

## Principles

Several principles were established, which led to the current code structure:

- Headers for the public interface are placed in the include directory.
- Headers for internal use are placed in the src directory.
- Detector-specific modules are grouped under the Detectors directory.
- Function-specific modules are located in the main directory or grouped, such as Utilities.

---

- Elements that are repeated or form part of a structure begin with a lowercase letter (e.g., src, include, test).
  - Conversely, labels and unique names start with an uppercase letter (e.g., Common, Detectors).
- Why are the headers located in `MyModule/include/MyModule` rather than directly in `MyModule/include`?
  - The challenge lies in adhering to multiple requirements. Headers need to be placed in a directory named after the module, and the code utilizing these headers must include `MyModule/xyz.h`. This must function consistently, whether within AliceO2 or in another repository, where headers could be either installed or internal. After considering various alternatives, we settled on this solution as it met our criteria without imposing overly complex CMake configurations. Should a better alternative be proposed, we would be open to adopting it.

---

- A _module_ represents a collection of closely related code with a shared interface, potentially resulting in one or more libraries.
- It is preferred to isolate large, common components (modules/projects) into separate repositories within AliceO2Group on GitHub.
- As a result, AliceO2 simplifies to a lean repository that includes:
  - Detector-specific code (e.g., for reconstruction, simulation, calibration, or quality control).
  - Shared elements (e.g., DataFormat, Steer-like functionalities), which are prerequisites for other components but not yet isolated into their own repositories.
  - Broad algorithms (e.g., global tracking), which depend on multiple detectors.
- The directory structure can be organized by detector, by function, or a combination of both. The AliceO2 repository combines a mix of detector-specific and function-based sub-modules with their respective sub-structures.
- Naming convention: camelCase
  - Structural elements or repeated parts are denoted with a lowercase initial (e.g., src, include, test).