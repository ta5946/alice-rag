## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/DATA/production/configurations/2022/MayJunePilotBeam/apass2/parse.sh

**Start chunk id:** 14408386524533f222614631fa7530f69b7d721f9b4564520b6cf2914838136b

## Content

DOCUMENT:
    startmonth=`echo $start | cut -d'-' -f2`
  startday=`echo $start | cut -d'-' -f3`
  starthour=`echo $start | cut -d'-' -f4`
  startminute=`echo $start | cut -d'-' -f5`
  startsecond=`echo $start | cut -d'-' -f6`

  goodITSmonth=`echo $goodITS | cut -d'-' -f2`
  goodITSday=`echo $goodITS | cut -d'-' -f3`
  goodITShour=`echo $goodITS | cut -d'-' -f4`
  goodITSminute=`echo $goodITS | cut -d'-' -f5`
  goodITSsecond=`echo $goodITS | cut -d'-' -f6`

  goodMFTmonth=`echo $goodMFT | cut -d'-' -f2`
  goodMFTday=`echo $goodMFT | cut -d'-' -f3`
  goodMFThour=`echo $goodMFT | cut -d'-' -f4`
  goodMFTminute=`echo $goodMFT | cut -d'-' -f5`
  goodMFTsecond=`echo $goodMFT | cut -d'-' -f6`

    PARAPHRASED DOCUMENT:

---

else
  echo "month, day, hour would trigger remapping, but minutes exceed the threshold for MFT remapping"
fi
else
  echo "month, day would trigger remapping, but hours exceed the threshold for MFT remapping"
fi
else
  echo "month would trigger remapping, but days exceed the threshold for MFT remapping"
fi
else
  echo "start month is later than the threshold required for MFT remapping"
fi

---

# check for ITS
if [[ $startmonth < $goodITSmonth ]]; then
  echo "month triggers remappingITS"
  remappingITS=1
elif [[ $startmonth == $goodITSmonth ]]; then
  if [[ $startday < $goodITSday ]]; then
    echo "day triggers remappingITS"
    remappingITS=1
  elif [[ $startday == $goodITSday ]]; then
    if [[ $starthour < $goodITShour ]]; then
      echo "hour triggers remappingITS"
      remappingITS=1
    elif [[ $starthour == $goodITShour ]]; then
      if [[ $startminute < $goodITSminute ]]; then
        echo "minute triggers remappingITS"
        remappingITS=1
      elif [[ $startminute == $goodITSminute ]]; then
        if [[ $startsecond -le $goodITSsecond ]]; then
          echo "second triggers remappingITS"
          remappingITS=1
        else
          echo "month, day, hour, and minute conditions would trigger remapping, but the seconds are greater than the threshold for ITS remapping"
        fi
      else
    fi
  fi
fi

---

echo "start = $start, validITS = $goodITS, validMFT = $goodMFT, remappingITS = $remappingITS, remappingMFT = $remappingMFT"
fi

---

#!/bin/bash

line=`grep $1 $O2DPG_ROOT/DATA/production/configurations/$ALIEN_JDL_LPMANCHORYEAR/$O2DPGPATH/$ALIEN_JDL_LPMPASSNAME/ctf2epn.txt`
echo "line found in file = $line"
if [[ -z $line ]]; then
  echo "CTF file not listed, no remapping required"
  export remappingITS=0
  export remappingMFT=0
  echo "remappingITS = $remappingITS, remappingMFT = $remappingMFT"
else
  epn=`echo $line | cut -d' ' -f1`
  start=`echo $line | cut -d' ' -f2`
  echo "epn = $epn"
  echo "start of CTF data = $start"

  lineTimes=`grep ${epn} $O2DPG_ROOT/DATA/production/configurations/$ALIEN_JDL_LPMANCHORYEAR/$O2DPGPATH/$ALIEN_JDL_LPMPASSNAME/goodITSMFT_fixed.txt`
  echo lineTimes = $lineTimes
  goodITS=`echo $lineTimes | cut -d' ' -f2`
  echo goodITS = $goodITS
  goodMFT=`echo $lineTimes | sed 's/^[0-9][0-9][0-9] \(2022-[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*\) \(2022-[0-9]*-[0-9]*-[0-9]*-[0-9]*-[0-9]*\)/\2/'`
  echo goodMFT = $goodMFT

---

else
  echo "month, day, hour would require remapping, but minutes exceed the threshold for ITS remapping"
fi
else
  echo "month, day would require remapping, but hours exceed the threshold for ITS remapping"
fi
else
  echo "month would require remapping, but days exceed the threshold for ITS remapping"
fi
else
  echo "start month is later than the threshold needed for ITS remapping"
fi

---

# verify MFT condition
if [[ $startmonth < $goodMFTmonth ]]; then
  echo "month initiates MFT remapping"
  remappingMFT=1
elif [[ $startmonth == $goodMFTmonth ]]; then
  if [[ $startday < $goodMFTday ]]; then
    echo "day triggers MFT remapping"
    remappingMFT=1
  elif [[ $startday == $goodMFTday ]]; then
    if [[ $starthour < $goodMFThour ]]; then
      echo "hour triggers MFT remapping"
      remappingMFT=1
    elif [[ $starthour == $goodMFThour ]]; then
      if [[ $startminute < $goodMFTminute ]]; then
        echo "minute triggers MFT remapping"
        remappingMFT=1
      elif [[ $startminute == $goodMFTminute ]]; then
        if [[ $startsecond -le $goodMFTsecond ]]; then
          echo "second triggers MFT remapping"
          remappingMFT=1
        else
          echo "month, day, hour, minute would initiate MFT remapping, but seconds exceed the threshold for MFT remapping"
        fi
      else

---

Display "good ITS: month = $goodITSmonth, day = $goodITSday, hour = $goodITShour, minute = $goodITSminute, seconds = $goodITSsecond"
  Display "good MFT: month = $goodMFTmonth, day = $goodMFTday, hour = $goodMFThour, minute = $goodMFTminute, seconds = $goodMFTsecond"
  Display "checking: month = $startmonth, day = $startday, hour = $starthour, minute = $startminute, seconds = $startsecond"