## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/DATA/production/configurations/asyncCalib/defineTimeBinsForCurrents.sh

**Start chunk id:** a3b24a02fd2b10d72b5fbed1ca69ba129b261814aca71af51b5cd9c3f149559f

## Content

#!/bin/bash

TIMEFRAMESPERJOB=${ALIEN_JDL_TIMEFRAMESPERJOB-100000}
if [[ -f timeBins.log ]]; then
  rm timeBins.log
fi

# generating list of files
sed -rn 's/.*turl="([^"]*)".*/\1/p' $1 | sort -u > o2currents_tpc.txt

# proceeding to extract timBins.log

if [[ ! -f prepareBins.C ]]; then
  echo "Fetching prepareBins.C from O2DPG"
  cp $O2DPG_ROOT/DATA/production/configurations/asyncCalib/prepareBins.C .
else
  echo "Using prepareBins.C from the input files"
fi
root -b -q "prepareBins.C+(\"o2currents_tpc.txt\", $TIMEFRAMESPERJOB)"