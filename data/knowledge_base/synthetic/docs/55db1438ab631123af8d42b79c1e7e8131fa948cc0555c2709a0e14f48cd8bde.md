## Metadata

**Document link:** https://github.com/AliceO2Group/AliceO2/blob/dev/run/SimExamples/Jet_Embedding_Pythia8/run.sh

**Start chunk id:** 55db1438ab631123af8d42b79c1e7e8131fa948cc0555c2709a0e14f48cd8bde

## Content

#!/usr/bin/env bash
#
# This document illustrates the following key aspects of the ALICE O2 simulation:

# a) how to execute a basic background event simulation with customized parameters
# b) how to generate signal events using specific pythia8 settings and user-defined hooks to filter events
# c) how to perform digitization embedding/overlaying of background and signal hits
# d) how to retrieve MC kinematics data using MClabels
# e) how to traverse through MCtracks

set -x

# PART a)
NBGR=5
o2-sim -j 20 -n ${NBGR} -g pythia8hi -m PIPE ITS TPC -o bkg --configKeyValues \
       "Diamond.position[2]=0.1;Diamond.width[2]=0.05"

---

# PART b)
# generate hard jets through a pythia8 configuration found in the file 'pythia8_hard.cfg'; event selection is managed by a user hook detailed in 'pythia8_userhooks_jets.macro', and the vertex setting is identical to that of background events (via --embedInto)
NSGN=10
o2-sim -j 20 -n ${NSGN} -g pythia8pp -m PIPE ITS TPC --configKeyValues "GeneratorPythia8.config=pythia8_hard.cfg;GeneratorPythia8.hooksFileName=pythia8_userhooks_jets.macro" --embedIntoFile bkg_Kine.root -o sgn > logsgn 2>&1

# PART c)
# perform digitization by summing signal over background events
o2-sim-digitizer-workflow --sims bkg,sgn --tpc-lanes 4 -b --run

# PART d)
# Basic analysis: read ITS digits and examine properties of both digit and MC tracks that produce a digit
root -q -b -l 'exampleMCTrackAnalysis.macro("itsdigits.root")'