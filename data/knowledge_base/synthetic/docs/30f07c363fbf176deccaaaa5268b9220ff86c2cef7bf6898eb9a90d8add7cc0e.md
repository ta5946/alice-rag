## Metadata

**Document link:** https://github.com/AliceO2Group/AliceO2/blob/dev/run/SimExamples/HepMC_JETSCAPE/README.md

**Start chunk id:** 30f07c363fbf176deccaaaa5268b9220ff86c2cef7bf6898eb9a90d8add7cc0e

## Content

The guide outlines the integration of JETSCAPE within the O2 simulation framework. For a detailed explanation of the HepMC(3) data handling, refer to the HepMC_fifo directory in the MC examples. The scripts utilize the `cmd` parameter of `GeneratorHepMC` to initiate JETSCAPE generation through the `jetscape.sh` script. It is crucial to enable the HepMC3 output format in the xml configuration file, as demonstrated in jetscape_user_example.xml, otherwise the simulation will fail.

# Scripts Overview

There are two scripts for running the simulations:
- **jetscape.sh** &rarr; initiates the JETSCAPE generation process
- **runo2sim.sh** &rarr; facilitates the creation of events using o2-sim

---

ADDITIONALLY, the jetscape_user_example.xml file is supplied to initiate JETSCAPE with custom parameters. Users can easily develop scripts akin to those provided for the EPOS4 tutorial, tailored for DPL or O2DPG simulations.

## jetscape.sh

This script can be executed independently to produce a .hepmc file. The example illustrates all the script functionalities, which are similarly implemented in the generation steering scripts. Specifically, the `-i` flag permits the specification of the user configuration XML file, `-s` enables the generator to use a user-defined seed, and the HepMC output filename is set via the `-o` flag. The script automatically modifies certain parts of the provided input XML file.

## runo2sim.sh

---

The final sections of the script run o2-sim, allowing users to modify them according to their needs. It is crucial to avoid removing the configuration keys `GeneratorFileOrCmd.cmd=$cmd -i $xml;GeneratorFileOrCmd.fileNames=test_out.hepmc;GeneratorFileOrCmd.outputSwitch=-o;GeneratorFileOrCmd.bMaxSwitch=none;GeneratorFileOrCmd.nEventsSwitch=none;` as their deletion could make the script non-functional. Instead, any additional configurations should be added using the -m flag.

---

## runo2sim.sh

This script is functional only with O2sim versions that include the FIFO custom name creation fix (the exact build number will be specified here in the future); otherwise, it may crash or fail to complete the simulation. Several flags can be used to adjust the generation settings:
- **-m , --more** &rarr; inputs advanced parameters via configuration key flags
- **-n , --nevents** &rarr; modifies the number of events in the .xml file or uses the value from the file if no events are specified
- **-i , --input** &rarr; specifies the .xml filename for JETSCAPE input, with no file extension needed
- **-j , --jobs** &rarr; defines the number of worker processes
- **-h , --help** &rarr; displays usage instructions