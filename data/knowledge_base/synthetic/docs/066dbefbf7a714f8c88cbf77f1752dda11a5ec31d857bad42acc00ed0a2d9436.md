## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/MC/bin/README.md

**Start chunk id:** 066dbefbf7a714f8c88cbf77f1752dda11a5ec31d857bad42acc00ed0a2d9436

## Content

## Review workflow

Currently, this feature is limited, but it is planned to enhance it with additional features.
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py inspect my_workflow --summary
```
provides a concise summary of `my_workflow`, and
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py inspect my_workflow --check
```
executes a quick sanity check, such as verifying that no task names are duplicated and all dependencies are present.

## Adjusting a single task
You can modify a task directly from the command line without altering the `JSON` file. To update the dependent tasks, for example, use
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py modify --needs dep_task_1 [dep_task_2 [...]]
```
For a complete list of options, type
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py modify --help
```

---

## Incorporate task blueprints into a workflow script

To incorporate new task blueprints into a workflow, use the following command:
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py create my_workflow --add-task task1 [task2 [...]]
```

The necessary `${O2_ROOT}/share/scripts/jobutils.sh; taskwrapper` is appended automatically to the command.

## Adjust the count of worker processes (when using a relative worker count)

To adjust the number of worker processes, you can use the command:
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py nworkers my_workflow 9
```

In this instance, it specifies the count as 9 workers.

## Combine two workflow scripts

To combine two workflow scripts, execute:
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py merge workflow1 workflow2 [-o workflow_merged]
```

If an output filename is not specified, the default will be `workflow_merged`. Following the merge, the worker count can be adjusted accordingly.

---

# General

This directory includes scripts/files for setting up, configuring, and executing ALICE Run3 Monte Carlo production workflows.
Key files include

* `o2dpg_sim_workflow.py` -- sets up a Monte Carlo workflow with dependent tasks. The primary output is a file `workflow.json` that describes the task graph to be run.

* `o2_dpg_workflow_runner.py` -- runs the tasks specified in the workflow file.


# Workflow management

The tool `$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py` offers functionalities to manage workflow files.

## General help

```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py [sub-command] --help
```
displays the available sub-commands and provides a detailed help message for each one.


## Create a new workflow file

```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py create my_workflow
```
generates a new file `my_workflow.json` (the file extension `.json` can be omitted in the command and will be added automatically)

## Add task skeletons to a workflow file