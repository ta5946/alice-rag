## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/DATA/testing/detectors/FV0/fv0-digits-qc-ctf.sh

**Start chunk id:** 516ff3d3d2ac33ef510fb3b90e025a31c7c727fb519e091c00cfe251b8677c58

## Content

# TODO use the add_W function from gen_topo_helper_functions.sh to assemble the workflow
# as exemplified in https://github.com/AliceO2Group/O2DPG/blob/master/DATA/production/calib/its-threshold-processing.sh
o2-dpl-raw-proxy ${ARGS_ALL} --readout-proxy "${IN_CHANNEL}" --dataspec "${PROXY_INSPEC}" --inject-missing-data \
| o2-fv0-flp-dpl-workflow --disable-root-output ${ARGS_ALL} --configKeyValues "$ARGS_ALL_CONFIG;" --pipeline fv0-datareader-dpl:$NTHREADS \
| o2-fv0-entropy-encoder-workflow ${ARGS_ALL} --configKeyValues "$ARGS_ALL_CONFIG;" ${CTF_DICT} \
| o2-qc ${ARGS_ALL} --local --host epn --config json://${MYDIR}/fv0-digits-ds.json \
| o2-ctf-writer-workflow ${ARGS_ALL} ${ARGS_CTF} --configKeyValues "$ARGS_ALL_CONFIG;" --onlyDet FV0 --output-dir $CTF_DIR --ctf-dict-dir $FILEWORKDIR --output-type ctf \
| o2-dpl-run $ARGS_ALL $GLOBALDPLOPT --dds ${WORKFLOWMODE_FILE} # use run option to export DDS xml file instead

---

#!/usr/bin/env bash

# Import common arguments and helper functions such as add_W
source common/setenv.sh
source common/getCommonArgs.sh
source common/gen_topo_helper_functions.sh

if [ -z $CTF_DIR ]; then
  CTF_DIR=$FILEWORKDIR
fi  # Set the directory for storing dictionary files
#ARGS_ALL+=" --monitoring-backend influxdb-unix:///tmp/telegraf.sock"
CTF_DICT="--ctf-dict $FILEWORKDIR/ctf_dictionary.root"
NTHREADS=2
# Specify the output directory for CTF; if you want to write to the current directory, remove `--output-dir $CTFOUT` from o2-ctf-writer-workflow or set `CTFOUT=""`
# Ensure the directory exists
ARGS_CTF="--min-file-size 500000000 --max-ctf-per-file 10000 --meta-output-dir /data/epn2eos_tool/epn2eos --append-det-to-period 0"

MYDIR="$(dirname $(readlink -f $0))"
PROXY_INSPEC="x:FV0/RAWDATA;eos:***/INFORMATION;dd:FLP/DISTSUBTIMEFRAME/0"
IN_CHANNEL="--channel-config 'name=readout-proxy,type=pull,method=connect,address=ipc://@$INRAWCHANNAME,transport=shmem,rateLogging=1'"