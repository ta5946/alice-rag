## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/MC/run/PWGHF/run_anchor_ini_from_cvmfs_example.sh

**Start chunk id:** 48d267fd0d762d86c62f54642b1e20e0e8dc3b333bf22ca4456a00efa5f9fb4b

## Content

DOCUMENT:
    GENTOREPLACE="\${O2DPG_ROOT}/MC/config/PWGHF/external/generator/generator_pythia8_gaptriggered_hf.C" # original external generator file to be updated
GENFROMCVMFS="/cvmfs/alice.cern.ch/el9-x86_64/Packages/O2DPG/daily-20240912-0200-1/MC/config/PWGHF/external/generator/generator_pythia8_gaptriggered_hf.C" # new external generator file to use

if [ ! -f $MODIFIEDINI ]; then
    sed -e "s|$CFGTOREPLACE|$CFGFROMCVMFS|g" -e "s|$GENTOREPLACE|$GENFROMCVMFS|g" $ORIGINALINI > $MODIFIEDINI
fi
MODIFIEDINI_ABSPATH=$(readlink -f $MODIFIEDINI)
export ALIEN_JDL_ANCHOR_SIM_OPTIONS="-gen external -ini $MODIFIEDINI_ABSPATH"

${O2DPG_ROOT}/MC/run/ANCHOR/anchorMC.sh

---

#!/bin/bash

export ALIEN_JDL_LPMANCHORPASSNAME="apass4"
export ALIEN_JDL_MCANCHOR="apass4"
export ALIEN_JDL_COLLISIONSYSTEM="pp"
export ALIEN_JDL_LPMPASSNAME="apass4"
export ALIEN_JDL_LPMRUNNUMBER="539071"
export ALIEN_JDL_LPMPRODUCTIONTYPE="MC"
export ALIEN_JDL_LPMINTERACTIONTYPE="pp"
export ALIEN_JDL_LPMPRODUCTIONTAG="LHC24_2023zg_apass4_MC_test"
export ALIEN_JDL_LPMANCHORRUN="539071"
export ALIEN_JDL_LPMANCHORPRODUCTION="LHC23zg"
export ALIEN_JDL_LPMANCHORYEAR="2023"

# added export
export NTIMEFRAMES=8
export NSIGEVENTS=100
export SPLITID=100
export PRODSPLIT=153
export CYCLE=0
export ALIEN_PROC_ID=2963436952

# disable quality control
export DISABLE_QC=1

---

# disable the quality control
export DISABLE_QC=1

# adjust the ini file to include an external generator and/or configuration from a specific tag that differs from the anchor tag
ORIGINALINI=${O2DPG_ROOT}/MC/config/PWGHF/ini/GeneratorHF_D2H_bbbar_Bforced_gap5_Mode2.ini # the initial .ini file to modify
MODIFIEDINI=GeneratorHF_D2H_bbbar_Bforced_gap5_Mode2_fromCVMFS.ini # the output name for the modified .ini file

CFGTOREPLACE="\${O2DPG_ROOT}/MC/config/PWGHF/pythia8/generator/pythia8_beautyhadronic_with_decays_Mode2.cfg" # the original configuration file to be changed
CFGFROMCVMFS="/cvmfs/alice.cern.ch/el9-x86_64/Packages/O2DPG/daily-20240912-0200-1/MC/config/PWGHF/pythia8/generator/pythia8_beautyhadronic_with_decays_Mode2.cfg" # the new configuration file to use