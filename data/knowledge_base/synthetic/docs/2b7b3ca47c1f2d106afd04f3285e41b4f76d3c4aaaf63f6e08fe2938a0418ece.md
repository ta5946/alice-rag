## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/DATA/testing/private/mfasel/runEMCRawToDigitsRecoPilelineQCAlllocalCTF.sh

**Start chunk id:** 2b7b3ca47c1f2d106afd04f3285e41b4f76d3c4aaaf63f6e08fe2938a0418ece

## Content

--ctf-dict "${CTF_DICT}" \
--mem-factor 5 \
--severity info \
--infologger-severity warning \
| o2-ctf-writer-workflow $ARGS_ALL \
--configKeyValues "${CONFKEYVAL}" \
--onlyDet $WORKFLOW_DETECTORS \
--ctf-dict "${CTF_DICT}" \
--output-directory $CTF_DIR \
--metadata-output-directory ${EPN2EOS_METAFILES_DIR} \
--minimum-file-size "${CTF_MINSIZE}" \
--maximum-ctf-per-file "${CTF_MAX_PER_FILE}" \
| o2-dpl-run $ARGS_ALL --dds ${WORKFLOWMODE_FILE}

---

o2-dpl-raw-proxy $ARGS_ALL \
    --dataspec "$PROXY_INSPEC" --inject-missing-data \
    --readout-proxy "--channel-config 'name=readout-proxy,type=pull,method=connect,address=ipc://@tf-builder-pipe-0,transport=shmem,rateLogging=1'" \
    --severity $SEVERITY_RAWPROXY \
    --infologger-severity $INFOLOGGER_SEVERITY_RAWPROXY \
    | o2-emcal-reco-workflow $ARGS_ALL \
    --input-type raw \
    --output-type cells \
    --no-root-input \
    --no-root-output \
    --no-mc \
    --EMCALRawToCellConverterSpec "--fitmethod=\"gamma2\" --maxmessage=10" \
    --severity $SEVERITY \
    --infologger-severity $INFOLOGGER_SEVERITY \
    --parallelism EMCALRawToCellConverterSpec:$NCPU \
    | o2-qc $ARGS_ALL \
    --config $QC_CONFIG \
    --local \
    --server-host $HOST \
    --severity $SEVERITY_QC \
    --infologger-severity $INFOLOGGER_SEVERITY_QC \
    | o2-emcal-entropy-encoder-workflow $ARGS_ALL \
    --ctf-dictionary "${CTF_DICT}" \
    --memory-factor 5 \
    --severity info \

---

#!/usr/bin/env bash

source /home/mfasel/alice/O2DataProcessing/common/setenv.sh

PROXY_INSPEC="A:EMC/RAWDATA;dd:FLP/DISTSUBTIMEFRAME/0;eos:***/INFORMATION"

NCPU=20 #$(grep ^cpu\\scores /proc/cpuinfo | uniq |  awk '{print $4}')
ARGS_ALL="-b --session default --shm-segment-size $SHMSIZE"
#HOST='$(hostname -s)-ib'
HOST=epn

QC_CONFIG=consul-json://alio2-cr1-hv-con01.cern.ch:8500/o2/components/qc/ANY/any/emc-qcmn-epnall-work
#QC_CONFIG=json:///home/epn/odc/files/emcQCTasks_multinode.json
INFOLOGGER_SEVERITY_RAWPROXY=warning
SEVERITY_RAWPROXY=warning
INFOLOGGER_SEVERITY=warning
SEVERITY=warning
INFOLOGGER_SEVERITY_QC=warning
SEVERITY_QC=warning

# CTF compression dictionary
CTF_DICT="${FILEWORKDIR}/ctf_dictionary.root"
# minimum file size for CTF (accumulate CTFs until this size is reached)
CTF_MINSIZE="500000000"
CTF_MAX_PER_FILE=10000