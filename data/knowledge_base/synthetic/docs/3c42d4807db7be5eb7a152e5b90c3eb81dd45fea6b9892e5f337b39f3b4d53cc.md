## Metadata

**Document link:** https://github.com/AliceO2Group/simulation/blob/main/docs/transport/geometry.md

**Start chunk id:** 3c42d4807db7be5eb7a152e5b90c3eb81dd45fea6b9892e5f337b39f3b4d53cc

## Content

同样地，能量阈值也可以在运行时通过修改 `o2_medium_params.json` 并重新注入来进行调整。

**重要提示**: 当前，使用 Geant4 时，对特殊介质控制的任何本地更改将无效。只有**全局设置**会影响传输代码的行为。

## 磁场

**...正在建设中...**

---

To scale the overall density of the geometry by a factor of 2, for example, run the simulation using
```bash
o2-sim <args> --configKeyValues "SimMaterialParams.globalDensityFactor=2"
```

To adjust densities per module, one can do so, for instance, for the TPC and ITS by executing
```bash
o2-sim <args> --configKeyValues "SimMaterialParams.localDensityFactor=ITS:1.5,TPC:1.2"
```


## Medium Properties

As noted, a medium specifies the physical characteristics of a volume. Some of these properties can be modified during runtime, as demonstrated below.

### Energy Thresholds

---

### Energy Thresholds

As a particle moves through the detector, it can interact with the material, resulting in the creation of secondary particles. In reality, all such particles would be generated, but in the simulation, one can disable the production of particles with energies below a specified threshold. The available cut parameters include:
* `CUTGAM` for photons,
* `CUTELE` for electrons,
* `CUTNEU` for neutral hadrons,
* `CUTHAD` for charged hadrons,
* `CUTMUO` for muons,
* `BCUTE` for electron bremsstrahlung,
* `BCUTM` for bremsstrahlung from muons and hadrons,
* `DCUTE` for delta-rays produced by electrons,
* `DCUTM` for delta-rays produced by muons,
* `PPCUTM` for direct pair production by muons.

These parameters are defined globally [here](https://github.com/AliceO2Group/AliceO2/blob/dev/Detectors/gconfig/src/SetCuts.cxx).

---

---
sort: 3
title: Detector geometry
---

# Detector geometry

Each module is composed of multiple volumes, typically a large number of them. Each volume is associated with a specific medium that determines its physical properties (such as steel, air, vacuum, concrete, or a custom mixture).

## Examining the geometry

After a simulation run, the used geometry is saved in `<prefix>_geometry.root`. This file can be explored using ROOT, allowing for the visualization of volumes. For example, to visualize the geometry, use the following code:
```cpp
auto geoMgr = TGeoManager::Import("<prefix>_geometry.root");
geoMgr->GetTopVolume()->Draw();
```
This can be done both in a non-interactive and interactive ROOT session.

## Adjusting material densities

Material densities can be modified during runtime from external sources. Both a global setting and a module-specific setting are available. The local settings have priority over the global ones. The default value for all parameters is `1`.

---

It is possible to customize parameters for each medium. For most modules, a text file is available that gets parsed at runtime. For instance, the files for passive modules can be found [here](https://github.com/AliceO2Group/AliceO2/tree/dev/Detectors/Passive/data).

Parameters can also be modified dynamically. Begin by extracting a JSON file containing all current parameters using:
```bash
o2-sim-serial -n0 --configKeyValues "MaterialManagerParam.outputFile=o2_medium_params.json"
```
This process will create the `o2_medium_params.json`, which includes all media per module and allows users to adjust parameters as needed. To apply a new configuration, use:
```bash
o2-sim --configKeyValues "MaterialManagerParam.inputFile=o2_medium_params_modified.json" [<additional_arguments>]
```

### Special Controls

Certain physics processes can be toggled on or off. The global default settings are documented [here](https://github.com/AliceO2Group/AliceO2/blob/dev/Detectors/gconfig/src/SetCuts.cxx).