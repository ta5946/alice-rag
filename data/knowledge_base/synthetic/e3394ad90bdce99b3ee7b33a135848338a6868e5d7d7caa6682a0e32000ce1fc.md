## Metadata

**Document link:** https://github.com/AliceO2Group/O2DPG/blob/master/MC/bin/README.md

**Start chunk id:** e3394ad90bdce99b3ee7b33a135848338a6868e5d7d7caa6682a0e32000ce1fc

## Content

**Question:** What is the main output file produced by running `o2dpg_sim_workflow.py`?

**Answer:** The main output file produced by running `o2dpg_sim_workflow.py` is a file named `workflow.json`, which describes the graph of individual tasks to run.

---

**Question:** How would you add task skeletons to an existing workflow file using the `o2dpg-workflow-tools.py` script, and what is the expected outcome?

**Answer:** To add task skeletons to an existing workflow file using the `o2dpg-workflow-tools.py` script, you would execute the following command:

```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py add-mytasks my_workflow
```

Here, `my_workflow` refers to the existing workflow file (which should have the `.json` extension, though it can be omitted in the command and will be added automatically).

The expected outcome of this command is that task skeletons will be added to the specified workflow file. These task skeletons provide a framework or blueprint for the tasks that will be executed in the workflow, without defining their specific configurations or parameters. This allows for the setup of a structured workflow where individual tasks can later be configured and linked together.

---

**Question:** What specific command-line options and parameters would you use to add task skeletons to a workflow file named `my_analysis_workflow` and what would be the expected outcome of executing this command?

**Answer:** To add task skeletons to a workflow file named `my_analysis_workflow`, you would execute the following command:

```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py add_tasks my_analysis_workflow
```

The expected outcome of executing this command is that task skeletons will be added to the `my_analysis_workflow.json` file (or `my_analysis_workflow` if the `.json` extension is omitted). This action populates the workflow file with placeholders for the tasks that will be used in the simulation workflow, allowing you to configure the specific tasks and their dependencies for the analysis.

---

**Question:** What command is used to add new task skeletons to a workflow file?

**Answer:** The command used to add new task skeletons to a workflow file is:
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py create my_workflow --add-task task1 [task2 [...]]
```

---

**Question:** What is the command used to update the number of workers in a workflow when using a relative number of workers, and what is the default output filename when merging two workflow files?

**Answer:** The command used to update the number of workers in a workflow when using a relative number of workers is:
```bash
$O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py nworkers my_workflow 9
```
When merging two workflow files, the default output filename is `workflow_merged`.

---

**Question:** What are the steps to programmatically add multiple specific task skeletons to an existing workflow file and then merge it with another workflow file, including the automatic adjustment of the number of workers, and what commands would you use for each step?

**Answer:** To programmatically add multiple specific task skeletons to an existing workflow file and then merge it with another workflow file, including the automatic adjustment of the number of workers, follow these steps:

1. **Add Task Skeletons:**
   Use the following command to add multiple task skeletons to your existing workflow:
   ```bash
   $O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py create my_workflow --add-task task1 task2 task3
   ```

2. **Merge Workflows:**
   Merge the updated workflow with another workflow file using:
   ```bash
   $O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py merge my_workflow workflow2 -o merged_workflow
   ```
   If you do not specify an output filename, the merged workflow will be saved as `merged_workflow`.

3. **Adjust Number of Workers:**
   After merging, adjust the number of workers in the merged workflow by using:
   ```bash
   $O2DPG_ROOT/MC/bin/o2dpg-workflow-tools.py nworkers merged_workflow 12
   ```
   Replace `12` with the desired number of workers.

---

**Question:** What does the `--summary` option of the `inspect` command provide?

**Answer:** The `--summary` option of the `inspect` command provides a very brief summary of the workflow.

---

**Question:** What are the two main actions that can be performed using the `o2dpg-workflow-tools.py inspect` command, and how do they differ?

**Answer:** The `o2dpg-workflow-tools.py inspect` command can perform two main actions:

1. Running with `--summary` yields a brief summary of the workflow. This provides a concise overview of the workflow's structure and content without delving into detailed checks.

2. Using `--check` conducts a quick sanity check on the workflow. This action verifies that task names are unique and that all dependencies are correctly defined, ensuring the workflow is logically sound and free from immediate errors.

---

**Question:** What specific checks are performed when using the `--check` option in the `o2dpg-workflow-tools.py inspect` command, and how does its output differ from the `--summary` option?

**Answer:** When using the `--check` option in the `o2dpg-workflow-tools.py inspect` command, it conducts a quick sanity check, which includes verifying that no task names are duplicated and ensuring that all necessary dependencies are present. 

In contrast, the `--summary` option yields a very brief summary of the workflow, without performing any checks.